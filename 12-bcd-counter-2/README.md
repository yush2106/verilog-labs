## BCD 2-Digit Counter

When the 1Hz signal inputs from clock divider, it drives the 2-digit 7 segment display to show the BCD count numbers.

The 7 segment display parts on the DE2-115 development board are common anode type, set the signal low level to enable the segments.

![image](https://github.com/yush2106/verilog-labs/blob/main/12-bcd-counter-2/img/12-bcd-counter-2-01.jpg)

![image](https://github.com/yush2106/verilog-labs/blob/main/12-bcd-counter-2/img/12-bcd-counter-2-02.jpg)

## Process Step

Step 1: BCD Counter 2-Digit

```
module BCD_Counter_2(
  input wire clk
  , input wire rst
  , output reg[6:0] Digit1
  , output reg[6:0] Digit2
);

integer d1_counter;
integer d2_counter;

initial begin
  d1_counter = 0;
  d2_counter = 0;
end

always @(posedge clk, negedge rst)
begin
  if(!rst) begin
    d1_counter <= 0;
	 d2_counter <= 0;
  end
  else begin
    if(d1_counter == 9) begin
      d1_counter <= 0;
		if(d2_counter == 9)
        d2_counter <= 0;
      else
        d2_counter <= d2_counter + 1;
    end
    else
      d1_counter <= d1_counter + 1;
  end
end

always @(d1_counter) begin
  case(d1_counter)
    0: Digit1 = 7'b1000000;
	 1: Digit1 = 7'b1111001;
	 2: Digit1 = 7'b0100100;
	 3: Digit1 = 7'b0110000;
	 4: Digit1 = 7'b0011001;
	 5: Digit1 = 7'b0010010;
	 6: Digit1 = 7'b0000010;
	 7: Digit1 = 7'b1111000;
	 8: Digit1 = 7'b0000000;
	 9: Digit1 = 7'b0010000;
	 default: Digit1 = 7'b1111111;
  endcase
end

always @(d2_counter) begin
  case(d2_counter)
    0: Digit2 = 7'b1111111;    //do not display
	 1: Digit2 = 7'b1111001;
	 2: Digit2 = 7'b0100100;
	 3: Digit2 = 7'b0110000;
	 4: Digit2 = 7'b0011001;
	 5: Digit2 = 7'b0010010;
	 6: Digit2 = 7'b0000010;
	 7: Digit2 = 7'b1111000;
	 8: Digit2 = 7'b0000000;
	 9: Digit2 = 7'b0010000;
	 default: Digit2 = 7'b1111111;
  endcase
end

endmodule
```

Step 2: Clock Didiver 1Hz

```
module ClockDivider(
  input wire clk
  , input wire rst
  , output reg clk_out
);

  reg[24:0] counter;
  
  //DE2-115 Clock 50Mhz
  //for 1s pulse, count to 25Mhz to reverse signal
  localparam max_count = 25_000_000 - 1;
  
  initial begin
    counter = 0;
  end
  
  always @(posedge clk, negedge rst)
  begin
	 if (!rst) begin
      counter <= 0;    //reset counter
      clk_out <= 0;    //set low position
    end
    else begin
      if(counter >= max_count) begin
		  counter <= 0;    //reset counter
		  clk_out <= ~clk_out;    //reverse signal
      end
		else  begin
		  counter <= counter + 1;    //add counter
		end
	 end
  end

endmodule
```

Step 3: Block Diagram

The 1Hz signal which is generated by the Clock Divider drives the BCD counter to display numbers on the 7 segment display parts.

![image](https://github.com/yush2106/verilog-labs/blob/main/12-bcd-counter-2/img/12-bcd-counter-2-03.jpg)

Step 4: Hardware Emulation

The 7 segment display parts show the adding 2-digit number per second.

![image](https://github.com/yush2106/verilog-labs/blob/main/12-bcd-counter-2/img/12-bcd-counter-2-04.jpg)